main()
{
        SetVariables "${1}" "${2}"
}
SetVariables()
{
        CDIR=`pwd`
        PROFILE_DIR="${1}"
        PROFILE_PLATFORM="${2}"
        InstallProfiles
}
InstallProfiles()
{
        if [ "${PROFILE_PLATFORM}" = "mac" ]
        then
                PROFILE_FINDER_EXTENSION="*.provisionprofile"
                PROFILE_EXTENSION="provisionprofile"
        else
                PROFILE_FINDER_EXTENSION="*.mobileprovision"
                PROFILE_EXTENSION="mobileprovision"
        fi

        chmod 755 ${CDIR}/mobileprovisionParser
        cd ${PROFILE_DIR}
        for pfile in `find . -name "${PROFILE_FINDER_EXTENSION}" | sed 's/.\///g'`
        do
                uuid=`${CDIR}/mobileprovisionParser -f "${pfile}" -o uuid`
                output="${HOME}/Library/MobileDevice/Provisioning Profiles/${uuid}.${PROFILE_EXTENSION}"
                cp "${pfile}" "${output}"

                echo "Profile Name: ${pfile}"
                echo "Profile UUID: ${uuid}"
                echo "Profile Copied Location: ${output}"
        done
}
main "${1}" "${2}"

