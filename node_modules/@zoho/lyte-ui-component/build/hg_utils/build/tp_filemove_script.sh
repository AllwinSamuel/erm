main()
{
        WORK_DIR=$(pwd)
        SRC_DIR=${1}
        BUILD_DIR=${2}
        MIGRATION_FILE=${3}
        DUPLICATE_JAR_LIST=${WORK_DIR}/tp_duplicate_jar_list.txt
        FileMovement
}
FileMovement()
{
   echo "Maven Jar Movement Starts..."
   if [ -f "${MIGRATION_FILE}" ]; then
           #duplicate_jar_files=$(cat ${MIGRATION_FILE} | cut -d ":" -f1 | sort | uniq -d)
           cat ${MIGRATION_FILE} | cut -d ":" -f1 | sort | uniq -d > ${DUPLICATE_JAR_LIST}
           for flist in $(cat ${MIGRATION_FILE}); do
               ivy_path=$(echo ${flist} | cut -d ":" -f1)
               tp_full_path=$(echo ${flist} | cut -d ":" -f2)
               src_path="${SRC_DIR}/${ivy_path}"
               if [ -f "${src_path}" ]; then
                   tp_folder_path=$(dirname "${tp_full_path}")
                   if [ ! -d ${BUILD_DIR}/${tp_folder_path} ]; then
                       mkdir -p ${BUILD_DIR}/${tp_folder_path}
                   fi
                   if grep -wq "${ivy_path}" ${DUPLICATE_JAR_LIST} ;then
                       echo "Copying TP::: ${src_path}"
                       cp -rvf ${src_path} ${BUILD_DIR}/${tp_full_path}
                   else
                       echo "Moving TP::: ${src_path}"
                       mv -v ${src_path} ${BUILD_DIR}/${tp_full_path}
                   fi
               fi
           done
           if [ -s ${DUPLICATE_JAR_LIST} ]; then
           for djarfiles in $(cat ${DUPLICATE_JAR_LIST}); do
               if [ -f ${SRC_DIR}/${djarfiles} ];then
                       rm -f ${SRC_DIR}/${djarfiles}
               fi
           done
           fi
   echo "Maven Jar Movement ends..."
   else
           echo "Provided TP Migration file(${MIGRATION_FILE}) is list not available. Kindly check .."
   fi   
}
main $*
